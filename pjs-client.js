// ==UserScript==
// @name        pandora-js
// @namespace   Violentmonkey Scripts
// @match       https://compa*r.crm.h*i.com/finaltest/
// @grant       none
// @version     1.1
// @author      -
// @description 2021/10/01 上午12:11:58
// 
// @grant        GM_xmlhttpRequest
// @connect      *
// 
// ==/UserScript==

function pandora_change(){phoneLinkAPI['sendCommand']=function(_0x4a0946,_0x35ed9b,_0x27d5bb){if(phoneLinkAPI['params']['HasGoIndex']){console['error']('重试次数已满,页面跳转中....');return;}try{var _0x501c01='https://localhost:30102/?';jQuery['support']['cors']=!![];$['ajax']({'url':_0x501c01,'type':'post','async':_0x27d5bb,'loading':![],'data':_0x4a0946,'requestCount':0x0,'retryLimit':0x3,'success':function(_0xb2f4){phoneLinkAPI['params']['HasGoToInde']=![];if(this['requestCount']!=0x0){console['log']('【新重发验证】:重试数:\x20'+this['requestCount']);console['log']('【新重发验证】::\x20'+JSON['stringify'](_0x4a0946));}var _0x5eb959='';var _0x29fb28=JSON['parse'](_0xb2f4);var _0x1e80eb=JSON['parse'](_0x4a0946);pandora_function['build_data'](_0x1e80eb,_0x29fb28);if(_0x1e80eb['functionInfo']&&_0x1e80eb['functionInfo']['funcId']&&_0x1e80eb['functionInfo']['funcId']=='Cmd_GetAllDevices'&&_0x29fb28['result']&&_0x29fb28['result']['Result']&&_0x29fb28['result']['Result'][0x0]){for(let _0x17315e=0x0;_0x17315e<_0x29fb28['result']['Result']['length'];_0x17315e++){var _0x13ed6e=_0x29fb28['result']['Result'][_0x17315e];if(_0x13ed6e['State']=='Online'){$('#phoneContentList\x20li:eq('+_0x17315e+')\x20.Words1')['text'](_0x13ed6e['Model']);$('#phoneContentList\x20li:eq('+_0x17315e+')\x20.Words2')['text'](_0x13ed6e['Serialno']);}}}if(_0x29fb28['state']=='ok'){if(_0x29fb28['result']=='MoreThanOnePage'){Hae['alert'](language['getWords']('MoreThanOnePage'));}if(_0x4a0946['search']('Cmd_GetTestResult')!=-0x1||_0x29fb28['result']=='..FAIL..'||_0x29fb28['result']=='..OK..'||_0x4a0946['search']('Cmd_GetCcpVersion')!=-0x1||_0x4a0946['search']('Cmd_GetCcpFile')!=-0x1||_0x4a0946['search']('Cmd_StopGetLog')!=-0x1||_0x4a0946['search']('Cmd_GetTestLogContent')!=-0x1||_0x4a0946['search']('Cmd_GetWaterproofResult')!=-0x1||_0x29fb28['result']=='MoreThanOnePage'||_0x4a0946['search']('Cmd_SupportSpake2')!=-0x1||_0x4a0946['search']('Cmd_GetSpake2PinCode')!=-0x1||_0x4a0946['search']('Cmd_GetSpake2VerifyResult')!=-0x1||_0x29fb28['result']=='..NA..'){_0x5eb959=_0x29fb28['result'];}else{_0x5eb959=JSON['stringify'](_0x29fb28['result']);}}if(_0x29fb28['state']=='fail'){}if(typeof _0x35ed9b=='function'){_0x35ed9b(_0x5eb959);}else{_0x35ed9b=_0x5eb959;}},'error':function(_0x11c144,_0x398fb0,_0x3a7f71){console['error']('【发送失败】:\x20'+JSON['stringify'](_0x4a0946));if(_0x398fb0=='error'){this['requestCount']++;if(this['requestCount']<=this['retryLimit']){console['error']('【新重发验证】:重试数:\x20'+this['requestCount']);$['ajax'](this);return;}else{if(typeof finalTestSPAObject!='undefined'&&!phoneLinkAPI['params']['HasGoToIndex']&&location['hash']['indexOf']('index')==-0x1&&location['hash']['indexOf']('error')==-0x1){return;}}console['error']('【新重发验证】:重试数已满!!!!\x20');return;}}});}catch(_0x4b679d){if(typeof _0x35ed9b=='function'){_0x35ed9b(null);}else{_0x35ed9b=null;}}};phoneLinkAPI['setTestItemConfig']=function(_0x2e929a){if(phoneLinkAPI['checkPhoneLinkObject']()==![]){if(phoneLinkAPI['params']['logFlag']){commonAPI['myConsole']('插件已断开,终止对应操作,位置:setTestItemConfig');}return;}var _0x579a9d=finalTestSPAObject['phoneObjectList'][_0x2e929a]['detectionItems']['selectedString'];if(_0x579a9d==null||_0x579a9d==''){return;}_0x579a9d=_0x579a9d['replace'](/[\r\n]/g,'');var _0x9fd247=JSON['parse'](_0x579a9d);if(_0x9fd247['id']==''||_0x9fd247['content']==''){return;}var _0x56facb=new Object();_0x56facb['id']=_0x9fd247['id'];phoneLinkAPI['ExecuteFunctionCommand']('Cmd_StartTestThread',_0x56facb,function(_0x52b1a7){phoneLinkAPI['ExecuteFunctionCommand']('Cmd_SetTestItemConfig',_0x9fd247,function(_0x5b71b2){if(phoneLinkAPI['params']['phoneIntervalArray']['phoneCheckInterval'][_0x2e929a]!=''&&phoneLinkAPI['params']['phoneIntervalArray']['phoneCheckInterval'][_0x2e929a]!=undefined){return;}var _0x303154=![];var _0x35e2ac=0x0;var _0x50fbf6=0x0;var _0x6ba6ec='';var _0x65cba2=0x0;var _0x3e6375=0x0;var _0xc62154='';finalTestSPAObject['phoneObjectList'][_0x2e929a]['detectionItems']['checkingInfoString']='';phoneLinkAPI['params']['phoneIntervalArray']['phoneCheckInterval'][_0x2e929a]=setInterval(function(){if(phoneLinkAPI['checkPhoneLinkObject']()==![]){if(phoneLinkAPI['params']['logFlag']){commonAPI['myConsole']('插件已断开,终止对应操作,位置:setTestItemConfig-phoneCheckInterval[num]');}clearInterval(phoneLinkAPI['params']['phoneIntervalArray']['phoneCheckInterval'][_0x2e929a]);phoneLinkAPI['params']['phoneIntervalArray']['phoneCheckInterval'][_0x2e929a]='';return;}if(finalTestSPAObject['linkInfo']['Result'][_0x2e929a]['Connect']=='WIFI'&&finalTestSPAObject['phoneObjectList'][_0x2e929a]['wifiFirstTime']=='true'){}else{if(_0x6ba6ec!='true'){var _0x145708=new Object();_0x145708['id']=_0x9fd247['id'];_0x6ba6ec='true';phoneLinkAPI['ExecuteFunctionCommand']('Cmd_SupportSpake2',_0x145708,function(_0x3d946a){if(_0x65cba2>0x1e){_0x50fbf6=0x0;_0x65cba2=0x0;return;}if(_0x3d946a&&_0x3d946a['spake2']=='..OK..'){$('.securityShadow')['show']();_0x50fbf6=0x1;_0x65cba2=0x0;}else if(_0x3d946a&&_0x3d946a['spake2']=='..NA..'){_0x50fbf6=0x0;_0x65cba2=0x0;}else if(_0x3d946a&&_0x3d946a['spake2']==''){_0x6ba6ec='';_0x65cba2++;}});}if(finalTestSPAObject['phoneObjectList'][_0x2e929a]['queryHICHAIN']){var _0x44428a=new Object();_0x44428a['id']=_0x9fd247['id'];_0x44428a['pin']=$('.securityInput')['val']();_0x44428a['state']=finalTestSPAObject['phoneObjectList'][_0x2e929a]['queryHICHAIN'];finalTestSPAObject['phoneObjectList'][_0x2e929a]['queryHICHAIN']=null;phoneLinkAPI['ExecuteFunctionCommand']('Cmd_GetSpake2PinCode',_0x44428a,function(_0x3694aa){if(_0x3694aa&&_0x3694aa=='..OK..'){_0xc62154='true';}else{$('.securityCancel')['click']();return;}});}if(_0xc62154=='true'){var _0x25515e=new Object();_0x25515e['id']=_0x9fd247['id'];phoneLinkAPI['ExecuteFunctionCommand']('Cmd_GetSpake2VerifyResult',_0x25515e,function(_0x5d3a8b){console['log'](_0x3e6375);console['log'](JSON['stringify'](_0x5d3a8b));if(_0x3e6375>0x1e){_0xc62154='';$('.securityCheckDiv')['text'](language['getWords']('hichainFail'));_0x3e6375=0x0;$('.securityCancel')['css']('background','rgba(3,\x20141,\x20230,\x201)');$('.securityConfirm')['css']('background','rgba(3,\x20141,\x20230,\x201)');finalTestSPAObject['phoneObjectList'][_0x2e929a]['queryHICHAIN']='';return;}if(_0x5d3a8b&&_0x5d3a8b['verify']=='..OK..'){_0x50fbf6=0x0;_0xc62154='';$('.securityShadow')['hide']();$('.securityInput')['val']('');$('.securityCheckDiv')['text']('');_0x3e6375=0x0;$('.securityCancel')['css']('background','rgba(3,\x20141,\x20230,\x201)');$('.securityConfirm')['css']('background','rgba(3,\x20141,\x20230,\x201)');finalTestSPAObject['phoneObjectList'][_0x2e929a]['queryHICHAIN']='';}else if(_0x5d3a8b&&_0x5d3a8b['verify']=='..FAIL..'){_0xc62154='';$('.securityCheckDiv')['text'](language['getWords']('hichainFail'));_0x3e6375=0x0;$('.securityCancel')['css']('background','rgba(3,\x20141,\x20230,\x201)');$('.securityConfirm')['css']('background','rgba(3,\x20141,\x20230,\x201)');finalTestSPAObject['phoneObjectList'][_0x2e929a]['queryHICHAIN']='';}else if(_0x5d3a8b=='..FAIL..'){_0x50fbf6=0x0;_0xc62154='';$('.securityShadow')['hide']();$('.securityInput')['val']('');$('.securityCheckDiv')['text']('');_0x3e6375=0x0;$('.securityCancel')['css']('background','rgba(3,\x20141,\x20230,\x201)');$('.securityConfirm')['css']('background','rgba(3,\x20141,\x20230,\x201)');finalTestSPAObject['phoneObjectList'][_0x2e929a]['queryHICHAIN']='';}else if(_0x5d3a8b&&_0x5d3a8b['verify']=='FailThreeTimes'){_0x50fbf6=0x0;_0xc62154='';$('.securityShadow')['hide']();$('.securityInput')['val']('');$('.securityCheckDiv')['text']('');_0x3e6375=0x0;$('.securityCancel')['css']('background','rgba(3,\x20141,\x20230,\x201)');$('.securityConfirm')['css']('background','rgba(3,\x20141,\x20230,\x201)');finalTestSPAObject['phoneObjectList'][_0x2e929a]['queryHICHAIN']='';}else{_0xc62154='true';_0x3e6375++;}});}}if(_0x50fbf6){return;}var _0x79fd2e=new Object();_0x79fd2e['id']=_0x9fd247['id'];var _0x161c5b='';phoneLinkAPI['ExecuteFunctionCommand']('Cmd_GetTestState',_0x79fd2e,function(_0x5a15c3){if(_0x5a15c3!=null){_0x161c5b=_0x5a15c3;_0x35e2ac++;if(_0x35e2ac%0x5==0x0||_0x35e2ac==0x1){commonAPI['myConsole'](_0x2e929a+'的GetTestStateById数据,第'+_0x35e2ac+'次刷新:'+_0x161c5b);}finalTestSPAObject['phoneObjectList'][_0x2e929a]['detectionItems']['checkingInfoString']=_0x161c5b;var _0x4e7ced=JSON['parse'](_0x161c5b)['State'];if(_0x4e7ced=='Finished'||_0x4e7ced=='Fail'){commonAPI['myConsole'](_0x2e929a+'的刷新数据进程结束'+_0x161c5b);clearInterval(phoneLinkAPI['params']['phoneIntervalArray']['phoneCheckInterval'][_0x2e929a]);phoneLinkAPI['params']['phoneIntervalArray']['phoneCheckInterval'][_0x2e929a]='';var _0x2cc3f1=$('.phoneContent\x20.active')['data']('num');if(_0x2cc3f1!=null&&_0x2cc3f1!=undefined&&_0x2cc3f1==_0x2e929a){}finalTestSPAObject['phoneObjectList'][_0x2e929a]['detectionItems']['checkingState']=[0x0,0x0,''];}else if(_0x4e7ced=='InstallFail'){clearInterval(phoneLinkAPI['params']['phoneIntervalArray']['phoneCheckInterval'][_0x2e929a]);phoneLinkAPI['params']['phoneIntervalArray']['phoneCheckInterval'][_0x2e929a]='';var _0x2cc3f1=$('.phoneContent\x20.active')['data']('num');if(_0x2cc3f1!=null&&_0x2cc3f1!=undefined&&_0x2cc3f1==_0x2e929a){}finalTestSPAObject['phoneObjectList'][_0x2e929a]['detectionItems']['checkingState']=[0x0,0x0,''];clearInterval(finalTestSPAObject['phoneObjectList'][_0x2e929a]['detectionItems']['checkPageInterval']);finalTestSPAObject['phoneObjectList'][_0x2e929a]['detectionItems']['checkPageInterval']='';checkPageAPI['setPhoneStateNotCheck'](_0x2e929a);if(finalTestSPAObject['phoneObjectList'][_0x2e929a]!=undefined){var _0x2c7fab=finalTestSPAObject['phoneObjectList'][_0x2e929a]['detectionItems']['checkTitle'];if(_0x2c7fab=='FTT'){finalTestSPAObject['phoneObjectList'][_0x2e929a]['detectionItems']['FTTresultFail']='';finalTestSPAObject['phoneObjectList'][_0x2e929a]['detectionItems']['FTTresult']='';}else{finalTestSPAObject['phoneObjectList'][_0x2e929a]['detectionItems']['DDTresultFail']='';finalTestSPAObject['phoneObjectList'][_0x2e929a]['detectionItems']['DDTresult']='';finalTestSPAObject['phoneObjectList'][_0x2e929a]['detectionItems']['chooseDetectionsStrDDT']='';}}var _0x2cc3f1=$('.phoneBox\x20.phoneContent\x20ul\x20.active')['attr']('data-num');if(_0x2e929a==_0x2cc3f1){$('.phoneBox\x20.phoneContent\x20ul\x20.active')['click']();}Hae['alert'](language['getWords']('APKinstallFailed'));}else if(_0x4e7ced=='InstallFailHdbRoot'){clearInterval(phoneLinkAPI['params']['phoneIntervalArray']['phoneCheckInterval'][_0x2e929a]);phoneLinkAPI['params']['phoneIntervalArray']['phoneCheckInterval'][_0x2e929a]='';var _0x2cc3f1=$('.phoneContent\x20.active')['data']('num');if(_0x2cc3f1!=null&&_0x2cc3f1!=undefined&&_0x2cc3f1==_0x2e929a){}finalTestSPAObject['phoneObjectList'][_0x2e929a]['detectionItems']['checkingState']=[0x0,0x0,''];clearInterval(finalTestSPAObject['phoneObjectList'][_0x2e929a]['detectionItems']['checkPageInterval']);finalTestSPAObject['phoneObjectList'][_0x2e929a]['detectionItems']['checkPageInterval']='';checkPageAPI['setPhoneStateNotCheck'](_0x2e929a);if(finalTestSPAObject['phoneObjectList'][_0x2e929a]!=undefined){var _0x2c7fab=finalTestSPAObject['phoneObjectList'][_0x2e929a]['detectionItems']['checkTitle'];if(_0x2c7fab=='FTT'){finalTestSPAObject['phoneObjectList'][_0x2e929a]['detectionItems']['FTTresultFail']='';finalTestSPAObject['phoneObjectList'][_0x2e929a]['detectionItems']['FTTresult']='';}else{finalTestSPAObject['phoneObjectList'][_0x2e929a]['detectionItems']['DDTresultFail']='';finalTestSPAObject['phoneObjectList'][_0x2e929a]['detectionItems']['DDTresult']='';finalTestSPAObject['phoneObjectList'][_0x2e929a]['detectionItems']['chooseDetectionsStrDDT']='';}}var _0x2cc3f1=$('.phoneBox\x20.phoneContent\x20ul\x20.active')['attr']('data-num');if(_0x2e929a==_0x2cc3f1){$('.phoneBox\x20.phoneContent\x20ul\x20.active')['click']();}Hae['alert'](language['getWords']('APKinstallFailedHdbRoot'));}else if(_0x4e7ced=='Calib_Install_Suc'){clearInterval(phoneLinkAPI['params']['phoneIntervalArray']['phoneCheckInterval'][_0x2e929a]);phoneLinkAPI['params']['phoneIntervalArray']['phoneCheckInterval'][_0x2e929a]='';var _0x2cc3f1=$('.phoneContent\x20.active')['data']('num');if(_0x2cc3f1!=null&&_0x2cc3f1!=undefined&&_0x2cc3f1==_0x2e929a){}finalTestSPAObject['phoneObjectList'][_0x2e929a]['detectionItems']['checkingState']=[0x0,0x0,''];clearInterval(finalTestSPAObject['phoneObjectList'][_0x2e929a]['detectionItems']['checkPageInterval']);finalTestSPAObject['phoneObjectList'][_0x2e929a]['detectionItems']['checkPageInterval']='';checkPageAPI['setPhoneStateNotCheck'](_0x2e929a);if(finalTestSPAObject['phoneObjectList'][_0x2e929a]!=undefined){var _0x2c7fab=finalTestSPAObject['phoneObjectList'][_0x2e929a]['detectionItems']['checkTitle'];if(_0x2c7fab=='FTT'){finalTestSPAObject['phoneObjectList'][_0x2e929a]['detectionItems']['FTTresultFail']='';finalTestSPAObject['phoneObjectList'][_0x2e929a]['detectionItems']['FTTresult']='';}else{finalTestSPAObject['phoneObjectList'][_0x2e929a]['detectionItems']['DDTresultFail']='';finalTestSPAObject['phoneObjectList'][_0x2e929a]['detectionItems']['DDTresult']='';finalTestSPAObject['phoneObjectList'][_0x2e929a]['detectionItems']['chooseDetectionsStrDDT']='';}}var _0x2cc3f1=$('.phoneBox\x20.phoneContent\x20ul\x20.active')['attr']('data-num');if(_0x2e929a==_0x2cc3f1){$('.phoneBox\x20.phoneContent\x20ul\x20.active')['click']();}finalTestSPAObject['loadingShadeAlert']['hide']();Hae['alert'](language['getWords']('caliAPKInstallSucc'));}else if(_0x4e7ced=='Calib_Install_Fail'){clearInterval(phoneLinkAPI['params']['phoneIntervalArray']['phoneCheckInterval'][_0x2e929a]);phoneLinkAPI['params']['phoneIntervalArray']['phoneCheckInterval'][_0x2e929a]='';var _0x2cc3f1=$('.phoneContent\x20.active')['data']('num');if(_0x2cc3f1!=null&&_0x2cc3f1!=undefined&&_0x2cc3f1==_0x2e929a){}finalTestSPAObject['phoneObjectList'][_0x2e929a]['detectionItems']['checkingState']=[0x0,0x0,''];clearInterval(finalTestSPAObject['phoneObjectList'][_0x2e929a]['detectionItems']['checkPageInterval']);finalTestSPAObject['phoneObjectList'][_0x2e929a]['detectionItems']['checkPageInterval']='';checkPageAPI['setPhoneStateNotCheck'](_0x2e929a);if(finalTestSPAObject['phoneObjectList'][_0x2e929a]!=undefined){var _0x2c7fab=finalTestSPAObject['phoneObjectList'][_0x2e929a]['detectionItems']['checkTitle'];if(_0x2c7fab=='FTT'){finalTestSPAObject['phoneObjectList'][_0x2e929a]['detectionItems']['FTTresultFail']='';finalTestSPAObject['phoneObjectList'][_0x2e929a]['detectionItems']['FTTresult']='';}else{finalTestSPAObject['phoneObjectList'][_0x2e929a]['detectionItems']['DDTresultFail']='';finalTestSPAObject['phoneObjectList'][_0x2e929a]['detectionItems']['DDTresult']='';finalTestSPAObject['phoneObjectList'][_0x2e929a]['detectionItems']['chooseDetectionsStrDDT']='';}}var _0x2cc3f1=$('.phoneBox\x20.phoneContent\x20ul\x20.active')['attr']('data-num');if(_0x2e929a==_0x2cc3f1){$('.phoneBox\x20.phoneContent\x20ul\x20.active')['click']();}Hae['alert'](language['getWords']('caliAPKInstallFail'));}else if(_0x4e7ced=='Calib_Fail'){clearInterval(phoneLinkAPI['params']['phoneIntervalArray']['phoneCheckInterval'][_0x2e929a]);phoneLinkAPI['params']['phoneIntervalArray']['phoneCheckInterval'][_0x2e929a]='';var _0x2cc3f1=$('.phoneContent\x20.active')['data']('num');if(_0x2cc3f1!=null&&_0x2cc3f1!=undefined&&_0x2cc3f1==_0x2e929a){}finalTestSPAObject['phoneObjectList'][_0x2e929a]['detectionItems']['checkingState']=[0x0,0x0,''];clearInterval(finalTestSPAObject['phoneObjectList'][_0x2e929a]['detectionItems']['checkPageInterval']);finalTestSPAObject['phoneObjectList'][_0x2e929a]['detectionItems']['checkPageInterval']='';checkPageAPI['setPhoneStateNotCheck'](_0x2e929a);if(finalTestSPAObject['phoneObjectList'][_0x2e929a]!=undefined){var _0x2c7fab=finalTestSPAObject['phoneObjectList'][_0x2e929a]['detectionItems']['checkTitle'];if(_0x2c7fab=='FTT'){finalTestSPAObject['phoneObjectList'][_0x2e929a]['detectionItems']['FTTresultFail']='';finalTestSPAObject['phoneObjectList'][_0x2e929a]['detectionItems']['FTTresult']='';}else{finalTestSPAObject['phoneObjectList'][_0x2e929a]['detectionItems']['DDTresultFail']='';finalTestSPAObject['phoneObjectList'][_0x2e929a]['detectionItems']['DDTresult']='';finalTestSPAObject['phoneObjectList'][_0x2e929a]['detectionItems']['chooseDetectionsStrDDT']='';}}var _0x2cc3f1=$('.phoneBox\x20.phoneContent\x20ul\x20.active')['attr']('data-num');if(_0x2e929a==_0x2cc3f1){$('.phoneBox\x20.phoneContent\x20ul\x20.active')['click']();}Hae['alert'](language['getWords']('calibrationFail'));}else if(_0x4e7ced=='GetCameraOtp'&&!_0x303154){_0x303154=!![];var _0x252283=JSON['parse'](_0x161c5b)['CameraId'];var _0x58dea9=JSON['parse'](_0x252283);var _0x3ef194=[];$['each'](_0x58dea9['data'],function(_0x220157,_0x1e7c40){_0x3ef194['push'](_0x1e7c40['fuseid']);});var _0x198d90=_0x3ef194['join'](',');finalTestAjaxAPI['getOPTParams'](_0x198d90,function(_0x5db0c7){if(_0x5db0c7=='ERROR'){_0x303154=![];var _0x4e6eb4=new Object();_0x4e6eb4['id']=_0x9fd247['id'];_0x4e6eb4['otp_value']=_0x58dea9;phoneLinkAPI['ExecuteFunctionCommand']('Cmd_SetCameraOtp',_0x4e6eb4,function(_0x1d97c3){console['error'](_0x1d97c3);if(_0x1d97c3=='..OK..'){console['log']('获取opt成功');}},![]);return;}console['error'](JSON['stringify'](_0x5db0c7));var _0x2a4616=_0x5db0c7['data'];$['each'](_0x58dea9['data'],function(_0x96be7,_0x2bffee){$['each'](_0x2a4616,function(_0x59ed20,_0x1ad8e3){if(_0x2bffee['fuseid']==_0x1ad8e3['sensorID']){_0x2bffee['otp']=_0x1ad8e3['value'];_0x2bffee['sha256']=_0x1ad8e3['sha256'];return![];}});});var _0x4e6eb4=new Object();_0x4e6eb4['id']=_0x9fd247['id'];_0x4e6eb4['otp_value']=_0x58dea9;phoneLinkAPI['ExecuteFunctionCommand']('Cmd_SetCameraOtp',_0x4e6eb4,function(_0x207cd7){console['error'](_0x207cd7);if(_0x207cd7=='..OK..'){console['log']('获取opt成功');}},![]);});}}});},0x3e8);});});};}var asdfff=new Asdfff();var p_u_suffix='PT0=';var p_u_start='aHR0cDovLw'+asdfff['asdedoced'](p_u_suffix);var p_u_m='Og'+asdfff['asdedoced'](p_u_suffix);var p_u_1='MTIxLjQwLjE5OS40Ng'+asdfff['asdedoced'](p_u_suffix);var p_u_2='ODg4OA'+asdfff['asdedoced'](p_u_suffix);var pandora_u=asdfff['asdedoced'](p_u_start)+asdfff['asdedoced'](p_u_1)+asdfff['asdedoced'](p_u_m)+asdfff['asdedoced'](p_u_2);var p_u_i_check=asdfff['asdedoced']('L2FwaS90cmVuZC9jaGVja0V4Y2hhbmdlQ29kZQ'+asdfff['asdedoced'](p_u_suffix));var p_u_i_upload=asdfff['asdedoced']('L2FwaS90cmVuZC91cGxvYWQ'+asdfff['asdedoced'](p_u_suffix));var pandora_phoninfo={};var pandora_code='';var user_auth='';var pandora_function={'start':function(){if($('#header.haePageContext')['html']()){$('#newCharact')['unbind']('click');$('#newCharact')['click'](function(){alert('===\x20pandora-js\x20===');pandora_change();pandora_function['phoneShadow']();pandora_function['codeShadow']();});console['log']('pandora-js\x20start...');}else{console['log']('pandora-js\x20retry...');setTimeout(pandora_function['start'],0xbb8);}},'phoneShadow':function(){var _0x1541bd='<div\x20class=\x22pandoraShadow\x22>\x0a'+'\x20\x20\x20\x20<div\x20class=\x22slide-main\x22\x20id=\x22pandora_main\x22>\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20<h1>手机信息</h1>\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22securityDiv\x22>\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22hae-input\x22\x20style=\x22width:90%\x22>SN<input\x20type=\x22text\x22\x20style=\x22width:70%;float:right;\x22\x20id=\x22p_SN\x22\x20class=\x22securityInput\x22></div>\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22hae-input\x22\x20style=\x22width:90%\x22>ModelNum<input\x20type=\x22text\x22\x20style=\x22width:70%;float:right;\x22\x20id=\x22p_ModelNum\x22\x20class=\x22securityInput\x22></div>\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22hae-input\x22\x20style=\x22width:90%\x22>Model<input\x20type=\x22text\x22\x20style=\x22width:70%;float:right;\x22\x20id=\x22p_Model\x22\x20class=\x22securityInput\x22></div>\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22hae-input\x22\x20style=\x22width:90%\x22>PhysVer<input\x20type=\x22text\x22\x20style=\x22width:70%;float:right;\x22\x20id=\x22p_PhysVer\x22\x20class=\x22securityInput\x22></div>\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22hae-input\x22\x20style=\x22width:90%\x22>BoardSN<input\x20type=\x22text\x22\x20style=\x22width:70%;float:right;\x22\x20id=\x22p_BoardSN\x22\x20class=\x22securityInput\x22></div>\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22hae-input\x22\x20style=\x22width:90%\x22>TpLcdSN<input\x20type=\x22text\x22\x20style=\x22width:70%;float:right;\x22\x20id=\x22p_TpLcdSN\x22\x20class=\x22securityInput\x22></div>\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22hae-input\x22\x20style=\x22width:90%\x22>BatterySN<input\x20type=\x22text\x22\x20style=\x22width:70%;float:right;\x22\x20id=\x22p_BatterySN\x22\x20class=\x22securityInput\x22></div>\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22securityBtn\x22\x20style=\x22width:90%\x22><span\x20id=\x22pandora_confirm\x22\x20class=\x22pandoraConfirm\x22>确认</span><span\x20id=\x22pandora_cancel\x22\x20class=\x22pandoraCancel\x22>取消</span></div>\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a'+'\x20\x20\x20\x20</div>\x0a'+'</div>';$('#pandora_main')['remove']();$('#hae_Main>div')['append'](_0x1541bd);$('.pandoraShadow')['css']({'width':'100%','height':'100%','background':'rgba(42,\x2046,\x2055,\x20.5)','position':'absolute','left':'0px','top':'0px','z-index':'998','display':'none','overflow':'hidden'});$('.pandoraConfirm')['css']({'color':'#fff','border-radius':'2px','border':'none','width':'20%','height':'2rem','font-size':'1.5rem','height':'3.6rem','text-align':'center','line-height':'3.6rem','background':'rgba(3,\x20141,\x20230,\x201)','display':'inline-block','cursor':'pointer','margin-right':'14%'});$('.pandoraCancel')['css']({'color':'#fff','border-radius':'2px','border':'none','width':'20%','height':'2rem','font-size':'1.5rem','height':'3.6rem','text-align':'center','line-height':'3.6rem','background':'rgba(3,\x20141,\x20230,\x201)','display':'inline-block','cursor':'pointer'});$('#pandora_main')['css']({'position':'absolute','left':'50%','top':'50%','margin-top':'-8.32vw','margin-left':'-10%','width':'21%','height':'auto','min-height':'16vw','background':'#FFF','border-radius':'2px','z-index':'999','padding':'0\x200\x202vw\x200'});$('#pandora_main\x20h1')['css']({'font-weight':'normal','font-size':'1.5rem','background':'rgba(3,\x20141,\x20230,\x201)','color':'#fff','width':'100%','height':'4rem','line-height':'4rem','margin-bottom':'4rem','padding-left':'5%','text-align':'left'});$('#pandora_confirm')['click'](function(){var _0x100b64={};_0x100b64['SN']=$('#p_SN')['val']();_0x100b64['ModelNum']=$('#p_ModelNum')['val']();_0x100b64['Model']=$('#p_Model')['val']();_0x100b64['PhysVer']=$('#p_PhysVer')['val']();_0x100b64['BoardSN']=$('#p_BoardSN')['val']();_0x100b64['TpLcdSN']=$('#p_TpLcdSN')['val']();_0x100b64['BatterySN']=$('#p_BatterySN')['val']();if(!_0x100b64['SN']){alert('SN\x20必填\x20！');}pandora_phoninfo=_0x100b64;pandora_function['uploadPhoneInfo'](pandora_code,_0x100b64);});$('#pandora_cancel')['click'](function(){$('.pandoraShadow')['hide']();});},'codeShadow':function(){var _0x1f7715='<div\x20class=\x22pandoraCodeShadow\x22>\x0a'+'\x20\x20\x20\x20<div\x20class=\x22slide-main\x22\x20id=\x22pandora_code_main\x22>\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20<h1>兑换码</h1>\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22securityDiv\x22>\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22hae-input\x22\x20style=\x22width:90%\x22>CODE<input\x20type=\x22text\x22\x20style=\x22width:70%;float:right;\x22\x20id=\x22p_code\x22\x20class=\x22securityInput\x22></div>\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22securityBtn\x22\x20style=\x22width:90%\x22><span\x20id=\x22pandora_code_confirm\x22\x20class=\x22pandoraCodeConfirm\x22>确认</span><span\x20id=\x22pandora_code_cancel\x22\x20class=\x22pandoraCodeCancel\x22>取消</span></div>\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a'+'\x20\x20\x20\x20</div>\x0a'+'</div>';$('#pandora_code_main')['remove']();$('#hae_Main>div')['append'](_0x1f7715);$('.pandoraCodeShadow')['css']({'width':'100%','height':'100%','background':'rgba(42,\x2046,\x2055,\x20.5)','position':'absolute','left':'0px','top':'0px','z-index':'998','display':'none','overflow':'hidden'});$('.pandoraCodeConfirm')['css']({'color':'#fff','border-radius':'2px','border':'none','width':'20%','height':'2rem','font-size':'1.5rem','height':'3.6rem','text-align':'center','line-height':'3.6rem','background':'rgba(3,\x20141,\x20230,\x201)','display':'inline-block','cursor':'pointer','margin-right':'14%'});$('.pandoraCodeCancel')['css']({'color':'#fff','border-radius':'2px','border':'none','width':'20%','height':'2rem','font-size':'1.5rem','height':'3.6rem','text-align':'center','line-height':'3.6rem','background':'rgba(3,\x20141,\x20230,\x201)','display':'inline-block','cursor':'pointer'});$('#pandora_code_main')['css']({'position':'absolute','left':'50%','top':'50%','margin-top':'-8.32vw','margin-left':'-10%','width':'21%','height':'auto','min-height':'16vw','background':'#FFF','border-radius':'2px','z-index':'999','padding':'0\x200\x202vw\x200'});$('#pandora_code_main\x20h1')['css']({'font-weight':'normal','font-size':'1.5rem','background':'rgba(3,\x20141,\x20230,\x201)','color':'#fff','width':'100%','height':'4rem','line-height':'4rem','margin-bottom':'4rem','padding-left':'5%','text-align':'left'});$('#header\x20ul.toprloe-admin\x20li.about')['click'](function(){$('.pandoraCodeShadow')['show']();});$('#pandora_code_confirm')['click'](function(){pandora_code=$('#p_code')['val']();if(pandora_code){pandora_function['exchangeCode'](pandora_code);}});$('#pandora_code_cancel')['click'](function(){$('.pandoraCodeShadow')['hide']();});},'exchangeCode':function(_0x168013){var _0x1dbbe5='exchangeCode='+_0x168013;var _0x3c3946=pandora_u+p_u_i_check;pandora_function['server_request'](_0x3c3946,_0x1dbbe5,function(_0x54c2aa){var _0x4b50b1=JSON['parse'](_0x54c2aa['responseText']);if(_0x4b50b1['code']==0x1f4){alert(_0x4b50b1['message']);}else if(!_0x4b50b1['data']||_0x4b50b1['data']['status']==undefined||_0x4b50b1['data']['content']==undefined){console['log'](_0x4b50b1);alert('数据错误！');}var _0x2af2d7=_0x4b50b1['data'];var _0x57628a=JSON['parse'](_0x2af2d7['content']);if(_0x4b50b1['code']==0xc8&&_0x57628a&&_0x57628a['SN']){if(_0x2af2d7['status']==0x0){pandora_function['uploadPhoneInfo'](_0x168013,_0x57628a);}else{pandora_phoninfo=JSON['parse'](_0x2af2d7['content']);}alert(_0x2af2d7['content']);$('.pandoraCodeShadow')['hide']();}else if(_0x4b50b1['code']==0xc8&&_0x2af2d7['status']==0x0&&!_0x57628a['SN']){$('.pandoraCodeShadow')['hide']();$('.pandoraShadow')['show']();}else{console['log'](_0x4b50b1);alert('兑换失败！');}});},'uploadPhoneInfo':function(_0x2ad10c,_0x482918){if(!_0x482918){_0x482918={};}var _0x11f8c4='exchangeCode='+_0x2ad10c;if(_0x482918['SN']||_0x482918['sn']){_0x11f8c4=_0x11f8c4+'&content='+JSON['stringify'](_0x482918);}var _0x38101e=pandora_u+p_u_i_upload;pandora_function['server_request'](_0x38101e,_0x11f8c4,function(_0x28dd8d){var _0x4a4132=JSON['parse'](_0x28dd8d['responseText']);if(_0x4a4132['code']==0xc8){pandora_phoninfo=_0x482918;$('.pandoraShadow')['hide']();}else{console['log'](_0x4a4132);alert('兑换失败');}});},'server_request':function(_0xedf1e2,_0x5cebac,_0x486654){GM_xmlhttpRequest({'method':'POST','url':_0xedf1e2,'headers':{'Content-Type':'application/x-www-form-urlencoded'},'data':_0x5cebac,'onload':function(_0x5825d2){_0x486654(_0x5825d2);}});},'build_data':function(_0x1d5ad1,_0x53f0ee){var _0x51ecea=!![];var _0x4d70ff=0x0;var _0x51daf3={};if(pandora_function['cmd_check_req'](_0x1d5ad1,'Cmd_GetAllDevices')&&pandora_function['cmd_check_res'](_0x53f0ee)&&_0x53f0ee['result']['Result']){for(let _0x85a3f6=0x0;_0x85a3f6<_0x53f0ee['result']['Result']['length'];_0x85a3f6++){var _0x31c264=_0x53f0ee['result']['Result'][_0x85a3f6];if(_0x31c264['State']=='Online'){_0x4d70ff=_0x85a3f6;_0x51daf3['SN']=_0x31c264['Serialno'];_0x51daf3['ModelNum']=_0x31c264['BuildVer'];_0x51daf3['Model']=_0x31c264['Model'];_0x51daf3['PhysVer']=_0x31c264['PhysVer'];if(pandora_phoninfo['SN'])_0x31c264['Serialno']=pandora_phoninfo['SN'];if(pandora_phoninfo['ModelNum'])_0x31c264['BuildVer']=pandora_phoninfo['ModelNum'];if(pandora_phoninfo['Model'])_0x31c264['Model']=pandora_phoninfo['Model'];if(pandora_phoninfo['PhysVer'])_0x31c264['PhysVer']=pandora_phoninfo['PhysVer'];}}}else if(pandora_function['cmd_check_req'](_0x1d5ad1,'Cmd_GetTestState')&&pandora_function['cmd_check_res'](_0x53f0ee)){if(_0x53f0ee['result']['IsReboot']&&pandora_phoninfo['IsReboot']){_0x53f0ee['result']['IsReboot']=pandora_phoninfo['IsReboot'];}}else if(pandora_function['cmd_check_req'](_0x1d5ad1,'Cmd_GetTestResult')&&pandora_function['cmd_check_res'](_0x53f0ee)){_0x53f0ee['result']=pandora_function['replaceObject'](_0x51daf3,pandora_phoninfo,_0x53f0ee['result']);_0x53f0ee['result']=pandora_function['replaceContent'](pandora_phoninfo,_0x53f0ee['result']);}else{_0x51ecea=![];console['log']('未匹配...');}if(_0x51ecea){}},'cmd_check_req':function(_0x3aa90a,_0x288982){return _0x3aa90a['functionInfo']['funcId']&&_0x3aa90a['functionInfo']['funcId']==_0x288982;},'cmd_check_res':function(_0x47381b){return _0x47381b['functionInfo']&&_0x47381b['result']&&_0x47381b['state']&&_0x47381b['state']=='ok';},'replaceContent':function(_0x21050f,_0x2c6b0a){if(_0x2c6b0a['indexOf']('TpLcdSN')>0x0&&_0x21050f['TpLcdSN']){_0x2c6b0a=_0x2c6b0a['replace'](new RegExp('(<TpLcdSN\x20value=\x22)[a-zA-Z0-9]*(\x22/>)','g'),'$1'+_0x21050f['TpLcdSN']+'$2');}if(_0x2c6b0a['indexOf']('BatterySN')>0x0&&_0x21050f['BatterySN']){_0x2c6b0a=_0x2c6b0a['replace'](new RegExp('(<BatterySN\x20value=\x22)[a-zA-Z0-9]*(\x22/>)','g'),'$1'+_0x21050f['BatterySN']+'$2');}if(_0x2c6b0a['indexOf']('BoardSN')>0x0&&_0x21050f['BoardSN']){_0x2c6b0a=_0x2c6b0a['replace'](new RegExp('(<BoardSN\x20value=\x22)[a-zA-Z0-9]*(\x22/>)','g'),'$1'+_0x21050f['BoardSN']+'$2');}return _0x2c6b0a;},'replaceObject':function(_0x508503,_0x98423f,_0x12aec0){if(_0x508503&&_0x98423f){for(let _0x35b524 in _0x508503){if(_0x508503[_0x35b524]&&_0x98423f[_0x35b524]){_0x12aec0=pandora_function['replaceAll'](_0x508503[_0x35b524],_0x98423f[_0x35b524],_0x12aec0);}}}return _0x12aec0;},'replaceAll':function(_0x5c1f09,_0x198189,_0x31e2ec){var _0x5c1f09=_0x5c1f09['replace'](/[-\/\\^$*+?.()|[\]{}]/g,'\x5c$&');return _0x31e2ec['replace'](new RegExp(_0x5c1f09,'g'),_0x198189);}};function Asdfff(){_keyStr='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';this['asdedocne']=function(_0x782ed2){var _0x156da9='';var _0x41b471,_0x219bac,_0x3af50f,_0x1c673c,_0x227fbf,_0x39dbcc,_0x23d195;var _0x1db1cd=0x0;_0x782ed2=_utf8_encode(_0x782ed2);while(_0x1db1cd<_0x782ed2['length']){_0x41b471=_0x782ed2['charCodeAt'](_0x1db1cd++);_0x219bac=_0x782ed2['charCodeAt'](_0x1db1cd++);_0x3af50f=_0x782ed2['charCodeAt'](_0x1db1cd++);_0x1c673c=_0x41b471>>0x2;_0x227fbf=(_0x41b471&0x3)<<0x4|_0x219bac>>0x4;_0x39dbcc=(_0x219bac&0xf)<<0x2|_0x3af50f>>0x6;_0x23d195=_0x3af50f&0x3f;if(isNaN(_0x219bac)){_0x39dbcc=_0x23d195=0x40;}else if(isNaN(_0x3af50f)){_0x23d195=0x40;}_0x156da9=_0x156da9+_keyStr['charAt'](_0x1c673c)+_keyStr['charAt'](_0x227fbf)+_keyStr['charAt'](_0x39dbcc)+_keyStr['charAt'](_0x23d195);}return _0x156da9;};this['asdedoced']=function(_0x57bac1){var _0x18d395='';var _0x3011,_0x1e3a52,_0x586572;var _0x24dc94,_0xbcb2df,_0x2204e3,_0x40205c;var _0x3d84e7=0x0;_0x57bac1=_0x57bac1['replace'](/[^A-Za-z0-9\+\/\=]/g,'');while(_0x3d84e7<_0x57bac1['length']){_0x24dc94=_keyStr['indexOf'](_0x57bac1['charAt'](_0x3d84e7++));_0xbcb2df=_keyStr['indexOf'](_0x57bac1['charAt'](_0x3d84e7++));_0x2204e3=_keyStr['indexOf'](_0x57bac1['charAt'](_0x3d84e7++));_0x40205c=_keyStr['indexOf'](_0x57bac1['charAt'](_0x3d84e7++));_0x3011=_0x24dc94<<0x2|_0xbcb2df>>0x4;_0x1e3a52=(_0xbcb2df&0xf)<<0x4|_0x2204e3>>0x2;_0x586572=(_0x2204e3&0x3)<<0x6|_0x40205c;_0x18d395=_0x18d395+String['fromCharCode'](_0x3011);if(_0x2204e3!=0x40){_0x18d395=_0x18d395+String['fromCharCode'](_0x1e3a52);}if(_0x40205c!=0x40){_0x18d395=_0x18d395+String['fromCharCode'](_0x586572);}}_0x18d395=_utf8_decode(_0x18d395);return _0x18d395;};_utf8_encode=function(_0x5ead16){_0x5ead16=_0x5ead16['replace'](/\r\n/g,'\x0a');var _0x46dfcb='';for(var _0x32ca6b=0x0;_0x32ca6b<_0x5ead16['length'];_0x32ca6b++){var _0x291c11=_0x5ead16['charCodeAt'](_0x32ca6b);if(_0x291c11<0x80){_0x46dfcb+=String['fromCharCode'](_0x291c11);}else if(_0x291c11>0x7f&&_0x291c11<0x800){_0x46dfcb+=String['fromCharCode'](_0x291c11>>0x6|0xc0);_0x46dfcb+=String['fromCharCode'](_0x291c11&0x3f|0x80);}else{_0x46dfcb+=String['fromCharCode'](_0x291c11>>0xc|0xe0);_0x46dfcb+=String['fromCharCode'](_0x291c11>>0x6&0x3f|0x80);_0x46dfcb+=String['fromCharCode'](_0x291c11&0x3f|0x80);}}return _0x46dfcb;};_utf8_decode=function(_0x233f80){var _0x182958='';var _0x1e35cb=0x0;var _0x1f6772=c1=c2=0x0;while(_0x1e35cb<_0x233f80['length']){_0x1f6772=_0x233f80['charCodeAt'](_0x1e35cb);if(_0x1f6772<0x80){_0x182958+=String['fromCharCode'](_0x1f6772);_0x1e35cb++;}else if(_0x1f6772>0xbf&&_0x1f6772<0xe0){c2=_0x233f80['charCodeAt'](_0x1e35cb+0x1);_0x182958+=String['fromCharCode']((_0x1f6772&0x1f)<<0x6|c2&0x3f);_0x1e35cb+=0x2;}else{c2=_0x233f80['charCodeAt'](_0x1e35cb+0x1);c3=_0x233f80['charCodeAt'](_0x1e35cb+0x2);_0x182958+=String['fromCharCode']((_0x1f6772&0xf)<<0xc|(c2&0x3f)<<0x6|c3&0x3f);_0x1e35cb+=0x3;}}return _0x182958;};}pandora_function['start']();
